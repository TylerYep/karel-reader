<h1 style=";text-align:right;direction:rtl"> פרק 6: בעוד לולאות </h1><hr/><p style=";text-align:right;direction:rtl"> הטכניקה של הגדרת שיטות חדשות, והגדרת לולאות - שימושיות ככל שהן - אינה מאפשרת לקארל לפתור בעיות חדשות. בכל פעם שאתה מפעיל תוכנית זה תמיד עושה בדיוק את אותו הדבר. תוכניות להיות הרבה יותר שימושי כאשר הם יכולים להגיב אחרת תשומות שונות. </p><p style=";text-align:right;direction:rtl"> לדוגמא. נניח שרצית לכתוב תוכנית שתעביר את קארל לקיר. אבל אתה פשוט לא רוצה תוכנית זו לעבוד על עולם אחד עם גודל קבוע. אתה רוצה לכתוב תוכנית אחת שיכולה לעבוד על כל העולם. </p>

<%
  include('templates/'+lang+'/programs/runnableWorldChoice.html', name="moveToWall", world="7x7", canvasWidth=300, ideSpeed=0.0)
%>

<p style=";text-align:right;direction:rtl"> נסה לשנות את העולם על ידי לחיצה על התפריט הנפתח &quot;שנה עולם&quot; מעל העולם. עבור כל גודל העולם, קארל יעבור עד שהוא פוגע בקיר. שימו לב כי הישג זה לא ניתן acomplished באמצעות <code class="keyword">for</code> לולאה. זה ידרוש מאיתנו לדעת את גודל העולם בזמן התכנות. </p><h3 style=";text-align:right;direction:rtl"> בסיסי בזמן לולאה </h3><p style=";text-align:right;direction:rtl"> ב Karel, לולאה <code class="keyword">while</code> משמש לחזור על קוד של קוד <i>ארוך כמו</i> כתנאי נתון מחזיקה. לולאה בזמן יש את הצורה הכללית הבאה: </p><p class="demoCode" style=";text-align:right;direction:rtl"><code><span class="keyword">while</span>(</code><i class="demoText">מבחן</i><code>){</code><br/><i class="demoText" style="margin-left:2em">הצהרות שיש לחזור עליהן</i><br/><code>}</code></p><p style=";text-align:right;direction:rtl"> זרימת הבקרה של לולאה זמן הוא כדלקמן. כאשר התוכנית פוגעת בלולאה זמן זה מתחיל לחזור על תהליך שבו הוא <i>בודק</i> תחילה אם הבדיקה עובר, ואם כן <i>מפעיל</i> את הקוד בגוף. </p> כאשר התוכנית <i>בודקת</i> אם הבדיקה עובר, זה מחליט אם <i class="demoText">הבדיקה</i> נכונה עבור המצב הנוכחי של העולם. אם כן, הלולאה תפעיל את הקוד בגוף. אם הבדיקה נכשלת, הלולאה הסתיימה והתוכנית נעה. <p style=";text-align:right;direction:rtl"> כאשר התוכנית <i>מפעילה</i> את הגוף של הלולאה, התוכנית מבצעת את הקווים בגוף אחד בכל פעם. כאשר התוכנית מגיעה בסוף לולאה בזמן, היא קופצת חזרה לחלק העליון של הלולאה. לאחר מכן הוא בודק את המבחן, ממשיך לולאה אם הוא עובר. התוכנית אינה יוצאת מהלולאה עד שהיא מגיעה לבדיקה, והמבחן נכשל. </p><p style=";text-align:right;direction:rtl"> לקארל יש הצהרות <i class="demoText">בדיקה</i> רבות, ואנחנו נעבור על כולם בפרק הבא. לעת עתה אנחנו הולכים להשתמש משפט מבחן אחד: <code>imentברור()</code> וזה נכון אם אין קיר ישירות infront של קארל. </p><h3 style=";text-align:right;direction:rtl"> באג באגף </h3><p style=";text-align:right;direction:rtl"> בוא נשנה את התוכנית שלנו למעלה כדי להפוך אותה למעניינת יותר. במקום לעבור רק לקיר, יש קארל מקום שורה של ביפר, אחד בכל ריבוע. שוב אנו רוצים שתכנית זו תעבוד למען עולם מכל גודל: </p>

<%
  include('templates/'+lang+'/programs/runnableWorldChoice.html', name="beeperLineBug1", world="7x7", canvasWidth=300, ideSpeed=0.0, isEditable="true")
%>

<p style=";text-align:right;direction:rtl"> זה נראה נהדר. למעט בעיה אחת. בכל העולם קארל אינו מציב ביפר על הריבוע האחרון של הקו (תסתכל מקרוב). כאשר קארל נמצא בכיכר האחרונה, התוכנית לא מבצעת את הגוף של הלולאה כי המבחן כבר לא עובר - קארל פונה לקיר. אתה עלול להתפתות לנסות לשנות את הסדר של הגוף, כך קארל נע לפני הצבת בירה. הקוד ניתן לעריכה אז לכו לנסות את זה! </p><p style=";text-align:right;direction:rtl"> יש בעיה עמוקה יותר, כי שום סידור מחדש של הגוף יכול לפתור. עבור העולם עם 7 עמודות, קארל צריך לשים 7 ביפר, אבל צריך רק להעביר 6 פעמים. מאז לולאה בזמן מבצעת את שני השורות כאשר הבדיקה עובר, איך אתה יכול לקבל את התוכנית לבצע פקודה אחת יותר זמן מאשר אחרים? </p><p style=";text-align:right;direction:rtl"> הבאג בתוכנית זו הוא דוגמה לבעיה תכנות שנקרא <b>שגיאת הגדר</b>. השם בא מן העובדה כי אם אתה רוצה לבנות גדר עשוי לוחות אשר יש לכתוב גדר אחת על גודל אחד, מספר עמדות הגדר הוא תמיד אחד גדול יותר מאשר מספר panesl. כמה גדר הודעות, למשל, אתה צריך לבנות גדר עם 10 לוחות? התשובה היא 11, כפי שמודגם בתרשים הבא: </p><center style=";text-align:right;direction:rtl"><img src="{{pathToRoot}}images/ch6/fencepost.png" style="width:500px;margin-bottom:10px"/></center><p style=";text-align:right;direction:rtl"> ברגע שאתה מגלה את זה, לתקן את הבאג הוא למעשה די קל. לפני שקארל מפסיק בסוף העולם, כל מה שהתוכנית צריכה לעשות הוא להציב ביפר אחרון: </p>

<%
  include('templates/'+lang+'/programs/runnableWorldChoice.html', name="beeperLine", world="7x7", canvasWidth=300, ideSpeed=0.8, isEditable="true")
%>
