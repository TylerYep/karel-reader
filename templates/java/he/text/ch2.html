<h1 style=";text-align:right;direction:rtl"> פרק 2: תכנות קארל </h1><hr/><p style=";text-align:right;direction:rtl"> הסגנון הפשוט ביותר של תוכנית Karel משתמש בטקסט כדי לציין רצף של פקודות מובנות שיש לבצע כאשר התוכנית <b>מופעלת</b>. שקול את התוכנית פשוטה Karel להלן. הטקסט בצד שמאל הוא התוכנית. מצבו של קרל מוצג מימין: </p>

<%
  include('templates/'+lang+'/programs/runnable.html', name="beeperPicking", world="stepUp")
%>

<p style=";text-align:right;direction:rtl"> לחץ על &quot;הפעלה&quot; כדי להפעיל את התוכנית. התוכניות נכתבות בדרך כלל ביישום מיוחד הנקרא <b>Enviroment Development</b>(IDE) ומרבית תוכניות קארל נכתבות ב- IDE בשם Eclipse. כמו IDE, לקורא זה יש את היכולת לבצע תוכניות כדי לעזור לך <i>לראות</i> איך הדברים עובדים כמו שאתה לומד. </p><p style=";text-align:right;direction:rtl"> התוכנית מורכבת מכמה חלקים. החלק הראשון כולל את השורות הבאות: </p><p style=";text-align:right;direction:rtl"><p class="demoCode" style="margin-left:10px;text-align:right;direction:rtl"><pre class="comment" translate="no" style=";text-align:right;direction:rtl">/*
&nbsp;*&nbsp;קובץ: ביפרקוטףאתקארל
&nbsp;* --------------------
&nbsp;*&nbsp;ביפרקוטפתאתקארל תוכנית מגדיר שיטת "run" עם שלוש
&nbsp;* פקודות. פקודות אלה לגרום קארל להתקדם בלוק אחד,
&nbsp;* להרים ביפר ולאחר מכן להתקדם אל הפינה הבאה.
&nbsp;*/</pre></p><p style=";text-align:right;direction:rtl"> שורות אלה הן דוגמה <b>להערה</b>, שהיא פשוט טקסט שנועד להסביר את פעולת התוכנית לקוראים האנושיים. הערות הן קארל והן ג &#39;אווה להתחיל עם תווים <code class="comment">/*</code> ו בסוף עם תווים <code class="comment">*/</code>. כאן, ההערה מתחילה בשורה הראשונה ומסתיימת כמה שורות מאוחר יותר. הכוכבים על הקווים האינדיבידואליים שמרכיבים את הטקסט של ההערה אינם נדרשים, אך מקלים על הקוראים האנושיים לראות את היקף ההערה. בתוכנית פשוטה, הערות נרחבות עשויות להיראות מטופשות, כי השפעת התוכנית ברורה, אך הן חשובות ביותר כאמצעי לתיעוד התכניות של תוכניות גדולות ומורכבות יותר. החלק השני של התוכנית הוא הקו: </p><p class="demoCode" style="margin-left:10px;text-align:right;direction:rtl"><code><span class="keyword">import</span> סטנפורד.קאראל.*;</code></p><p style=";text-align:right;direction:rtl"> שורה זו מבקשת לכלול את כל ההגדרות מתוך <code>סטנפורד.קאראל</code> library. ספריה זו מכילה את ההגדרות הבסיסיות הדרושות לכתיבת תוכניות קארל, כגון הגדרות של פעולות סטנדרטי <code>מהלך_\_לזוז_\_לעבור()</code> ו <code>בחרביפר()</code>. כי אתה תמיד צריך גישה לפעולות אלה, כל תוכנית Karel שתכתוב יכלול את הפקודה יבוא לפני שאתה כותב את התוכנית בפועל. </p><p style=";text-align:right;direction:rtl"> החלק האחרון של תוכנית קארל כולל את הגדרת התוכנית הבאה: </p><p class="demoCode" style="margin-left:10px;text-align:right;direction:rtl"><code><span class="keyword">public class</span> ביפרקוטףאתקארל <span class="keyword">extends</span> קארל {</code><br/><code>&nbsp;&nbsp;&nbsp;<span class="keyword">public void</span> run() {</code><br/><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;מהלך_\_לזוז_\_לעבור();</code><br/><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;בחרביפר();</code><br/><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;מהלך_\_לזוז_\_לעבור();</code><br/><code>&nbsp;&nbsp;&nbsp;}</code><br/><code>}</code><br/></p><p style=";text-align:right;direction:rtl"> כדי להבין את ההגדרה הזו, כדאי לבחון את המבנה שלה בזהירות רבה יותר. ההגדרה של תוכנית הביפרקוטפתאתקארל מורכבת מהקו המתחיל <code class="keyword">public class</code> והיא מקיפה את כל הסדנים המתולתלים בסוף אותו קו ואת הסוג הסוגר המתאים על השורה האחרונה של התוכנית. השורה היחידה המציגה את הכיתה החדשה נקראת <b>הכותרת</b> של ההגדרה; את הקוד בין הפלטה נקרא <b>הגוף</b>. </p><p style=";text-align:right;direction:rtl"> בתכנות, זה לעתים קרובות מאוד שימושי לחשוב על הגדרה מסוימת וגוף כמו רעיונות נפרדים. בדוגמה זו, ההגדרה של ביפרקוטפתאתקארל יש את הטופס הבא, שבו את כל הגוף של ההגדרה ניתן להוציא את דעתך לרגע: </p><p class="demoCode" style="margin-left:10px;text-align:right;direction:rtl"><code><span class="keyword">public class</span> ביפרקוטףאתקארל <span class="keyword">extends</span> קארל {</code><br/><i class="demoText" style="margin-left:2em">גוף ההגדרה של התוכנית</i><br/><code>}</code><br/></p><p style=";text-align:right;direction:rtl"> שורת הכותרת בראש אומרת לך לא מעט על תוכנית הביפרקוטפתאתקארל, אפילו לפני שנראית מה לראות את הגוף. הביטוי &#39; <code class="keyword">public class</code> מתחיל את ההגדרה של תוכנית. הביטוי <code><span class="keyword">extends</span> קארל</code> משמש לציון כי <code>ביפרקוטףאתקארל</code> היא תוכנית Karel. </p><p style=";text-align:right;direction:rtl"> עכשיו בואו נסתכל על הגוף של הביפרקוטפתאתקארל תוכנית. גוף זה מורכב מן השורות הבאות: </p><p class="demoCode" style="margin-left:10px;text-align:right;direction:rtl"><code>&nbsp;&nbsp;&nbsp;<span class="keyword">public void</span> run() {</code><br/><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;מהלך_\_לזוז_\_לעבור();</code><br/><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;בחרביפר();</code><br/><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;מהלך_\_לזוז_\_לעבור();</code><br/><code>&nbsp;&nbsp;&nbsp;}</code><br/></p><p style=";text-align:right;direction:rtl"> קווים אלה מייצגים את ההגדרה של <b>שיטה</b> חדשה, המפרטת את רצף הצעדים הנחוצים כדי להגיב לפקודה. כמו במקרה של הביפרקוטפתאתקארל תוכנית עצמה, הגדרת השיטה מורכבת משני חלקים שניתן להתייחס אליהם בנפרד: השורה הראשונה היא כותרת השיטה והקוד בין הפלטה המתולתלת הוא גוף השיטה. אם אתה מתעלם מהגוף לעת עתה, הגדרת השיטה נראית כך: </p><p class="demoCode" style="margin-left:10px;text-align:right;direction:rtl"><code>&nbsp;&nbsp;&nbsp;<span class="keyword">public void</span> run() {</code><br/><i class="demoText" style="margin-left:3.5em">גוף ההגדרה של השיטה</i><br/><code>&nbsp;&nbsp;&nbsp;}</code><br/></p><p style=";text-align:right;direction:rtl"> שתי המילים הראשונות בכותרת השיטה, <code class="keyword">public</code><code class="keyword">void</code>, הן חלק מהמבנה התחבירי של ג&#39;אווה, ועליך להרגיש חופשי להתעלם מהן בשלב זה. המילה הבאה בשורת הכותרת מציינת את שם השיטה החדשה, אשר במקרה זה היא <b>הפעלת</b> השיטה. הגדרת שיטה פירושה שקארל יכול להגיב לפקודה חדשה בשם זה. הפקודה <code>run</code> משחק תפקיד מיוחד בתוכנית Karel. כאשר אתה מפעיל תוכנית Karel זה יוצר מופע חדש Karel, מוסיף כי קארל לעולם שאתה מציין, ולאחר מכן בעיות הפקודה להפעיל. האפקט של הפעלת התוכנית מוגדר על ידי הגוף של שיטת ריצה, שהוא רצף של פקודות שהרובוט יבצע לפי הסדר. לדוגמה, גוף שיטת הריצה של הביפרקוטפתאתקארל תוכנית הוא: </p><p class="demoCode" style="margin-left:10px;text-align:right;direction:rtl"><code>&nbsp;&nbsp;&nbsp;מהלך_\_לזוז_\_לעבור();</code><br/><code>&nbsp;&nbsp;&nbsp;בחרביפר();</code><br/><code>&nbsp;&nbsp;&nbsp;מהלך_\_לזוז_\_לעבור();</code><br/></p><p style=";text-align:right;direction:rtl"> לכן, אם המצב הראשוני של העולם תואם את הדוגמה שניתנה בפרק 1, קרל הראשון זז קדימה לתוך הפינה המכילה את ביפר, מרים את זה ביפר, ולבסוף נע קדימה לפינה ממש לפני הקיר, כפי שמוצג להלן תרשים לפני ואחרי: </p>
<%
  include('templates/'+lang+'/programs/beforeAfter.html', name="ba2", before="stepUp", after="stepUpM1", ratio="0.7", canvasWidth="300")
%>
<h2 style=";text-align:right;direction:rtl"> פתרון בעיה מעניינת יותר </h2><p style=";text-align:right;direction:rtl"> הביפרקוטפתאתקארל תוכנית מוגדרת לעיל עדיין לא עושה הרבה. בוא ננסה לעשות את זה קצת יותר מעניין. נניח כי המטרה היא לא רק כדי לקבל קארל להרים את ביפר אבל להזיז את ביפר מן המיקום ההתחלתי שלה על הטור השני והשורה הראשונה למרכז מדף. לכן, המשימה הבאה שלך היא להגדיר תוכנית חדשה Karel שמבצע את המשימה מאויר בתרשים זה: </p>
<%
  include('templates/'+lang+'/programs/beforeAfter.html', name="ba3", before="stepUp", after="stepUpGoal", ratio="0.7", canvasWidth="300")
%>
<p style=";text-align:right;direction:rtl"> שלוש הפקודות הראשונות בתכנית החדשה - אלה שנעות קדימה, מרימות את האיתורית, ואז עולות אל המדף - הן כמו קודם: </p></p><p class="demoCode" style="margin-left:10px;text-align:right;direction:rtl"><code>&nbsp;&nbsp;&nbsp;מהלך_\_לזוז_\_לעבור();</code><br/><code>&nbsp;&nbsp;&nbsp;בחרביפר();</code><br/><code>&nbsp;&nbsp;&nbsp;מהלך_\_לזוז_\_לעבור();</code><br/></p><p style=";text-align:right;direction:rtl"> מכאן, הצעד הבא הוא לפנות שמאלה כדי להתחיל לטפס על המדף. הניתוח הזה קל, כי לקארל יש פונשמאמאלה פקודה ברפרטואר הסטנדרטי שלה. ביצוע פקודה פונהשמאלה פקודה בסוף רצף הפקודות הקודם משאיר את קארל פונה צפונה בפינת השורה הראשונה והשורה השלישית. אם קארל מבצע פקודת העברה, הוא ינוע צפונה כדי להגיע למצב הבא: </p>
<%
  include('templates/'+lang+'/programs/world.html', name="ba3", world="stepUpM2")
%>
<p style=";text-align:right;direction:rtl"> מכאן, הדבר הבא שאתה צריך לעשות הוא לקבל קארל לפנות ימינה, כך שהוא שוב פונה מזרחה. בעוד המבצע הזה הוא מושגית פשוט קל כמו מקבל קארל לפנות שמאלה, יש בעיה קלה: השפה של קארל כוללת <code>פונהשמאלה</code> פקודה, אבל לא <code>פנהימינה</code> פקודה. זה כאילו קנית את המודל הכלכלי יש עכשיו גילה כי הוא חסר כמה תכונות חשובות. </p><p style=";text-align:right;direction:rtl"> בשלב זה, יש לך את ההזדמנות הראשונה שלך להתחיל לחשוב כמו מתכנת. יש לך קבוצה אחת של פקודות, אבל לא בדיוק את מה שאתה צריך. מה אתה יכול לעשות? האם אתה יכול להשיג את האפקט של פקודת פקידנה באמצעות רק את היכולות שיש לך? התשובה, כמובן, היא כן. אתה יכול להשיג את ההשפעה של פנייה ימינה על ידי פנייה שמאלה שלוש פעמים. לאחר שלוש פניות שמאלה, קארל יפנה לכיוון הרצוי. מכאן, כל מה שאתה צריך לעשות הוא תוכנית קרל לעבור למרכז המדף, לזרוק את ביפר ולאחר מכן להתקדם אל המיקום הסופי. הנה יישום מלא של תוכנית <code>צעדלמעלה</code> שמבצע את המשימה כולה: </p>

<%
  include('templates/'+lang+'/programs/runnable.html', name="stepUp", world="stepUp", ideSpeed=0.5)
%>
