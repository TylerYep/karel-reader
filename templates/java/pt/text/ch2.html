<h1> Capítulo 2: Programação Karel </h1><hr/><p> O estilo mais simples do programa Karel usa texto para especificar uma sequência de comandos internos que devem ser executados quando o programa é <b>executado</b>. Considere o programa simples de Karel abaixo. O texto à esquerda é o programa. O estado do mundo de Karel é mostrado à direita: </p>

<%
  include('templates/'+lang+'/programs/runnable.html', name="beeperPicking", world="stepUp")
%>

<p> Pressione o botão &quot;Executar&quot; para executar o programa. Os programas geralmente são escritos em um aplicativo especial chamado <b>Ambiente de Desenvolvimento Integrado</b>(IDE) e a maioria dos programas Karel são escritos em um IDE chamado Eclipse. Como um IDE, esse leitor tem a capacidade de executar programas para ajudá-lo a <i>ver</i> como as coisas funcionam à medida que você aprende. </p><p> O programa é composto de várias partes. A primeira parte consiste nas seguintes linhas: </p><p><p class="demoCode" style="margin-left:10px"><pre class="comment" translate="no">/*
&nbsp;*&nbsp;Ficheiro: BeeperPickingKarel.java
&nbsp;* ---------------------------------
&nbsp;*&nbsp;O programa BeeperPickingKarel define um método
&nbsp;* "run" com três comandos. Esses comandos fazem com
&nbsp;* que Karel avance um bloco, pegue um bip e avance
&nbsp;* para o próximo canto.
&nbsp;*/</pre></p><p> Essas linhas são um exemplo de um <b>comentário</b>, que é simplesmente um texto projetado para explicar o funcionamento do programa aos leitores humanos. Comentários em Karel e Java começam com os caracteres <code class="comment">/*</code> e terminam com os caracteres <code class="comment">*/</code>. Aqui, o comentário começa na primeira linha e termina várias linhas depois. As estrelas nas linhas individuais que compõem o texto do comentário não são necessárias, mas tornam mais fácil para os leitores humanos verem a extensão do comentário. Em um programa simples, comentários extensos podem parecer tolos porque o efeito do programa é óbvio, mas eles são extremamente importantes como um meio de documentar o design de programas maiores e mais complexos. A segunda parte do programa é a linha: </p><p class="demoCode" style="margin-left:10px"><code><span class="keyword">import</span> stanford.karel.*;</code></p><p> Esta linha solicita a inclusão de todas as definições da biblioteca <code>stanford.karel</code>. Esta biblioteca contém as definições básicas necessárias para escrever programas Karel, como as definições das operações padrão <code>mover()</code> e <code>escolherBeeper()</code>. Como você sempre precisa acessar essas operações, todo programa Karel que você escrever incluirá esse comando de importação antes de você escrever o programa real. </p><p> A parte final do programa Karel consiste na seguinte definição de programa: </p><p class="demoCode" style="margin-left:10px"><code><span class="keyword">public class</span> BeeperPickingKarel <span class="keyword">extends</span> Karel {</code><br/><code>&nbsp;&nbsp;&nbsp;<span class="keyword">public void</span> run() {</code><br/><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mover();</code><br/><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;escolherBeeper();</code><br/><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mover();</code><br/><code>&nbsp;&nbsp;&nbsp;}</code><br/><code>}</code><br/></p><p> Para entender essa definição, é útil observar com mais cuidado sua estrutura. A definição do programa BeeperPickingKarel consiste na linha que começa com <code class="keyword">public class</code> e engloba tudo entre a chave no final da linha e a chave de fechamento correspondente na última linha do programa. A única linha que introduz a nova classe é chamada de <b>cabeçalho</b> da definição; o código entre as chaves é chamado de <b>corpo</b>. </p><p> Na programação, muitas vezes é muito útil pensar em uma definição particular e seu corpo como idéias separáveis. Neste exemplo, a definição de BeeperPickingKarel tem o seguinte formato, onde o corpo inteiro da definição pode ser colocado fora da sua mente no momento: </p><p class="demoCode" style="margin-left:10px"><code><span class="keyword">public class</span> BeeperPickingKarel <span class="keyword">extends</span> Karel {</code><br/><i class="demoText" style="margin-left:2em">corpo da definição do programa</i><br/><code>}</code><br/></p><p> A linha de cabeçalho no topo diz muito sobre o programa BeeperPickingKarel, mesmo antes de você ter olhado para ver o que o corpo contém. A frase <code class="keyword">public class</code> inicia a definição de um programa. A frase <code><span class="keyword">extends</span> Karel</code> é usado para indicar que o <code>BeeperPickingKarel</code> é um programa da Karel. </p><p> Agora vamos ver o corpo do programa BeeperPickingKarel. Esse corpo consiste nas seguintes linhas: </p><p class="demoCode" style="margin-left:10px"><code>&nbsp;&nbsp;&nbsp;<span class="keyword">public void</span> run() {</code><br/><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mover();</code><br/><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;escolherBeeper();</code><br/><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mover();</code><br/><code>&nbsp;&nbsp;&nbsp;}</code><br/></p><p> Essas linhas representam a definição de um novo <b>método</b>, que especifica a seqüência de etapas necessárias para responder a um comando. Como no caso do próprio programa BeeperPickingKarel, a definição do método consiste em duas partes que podem ser consideradas separadamente: A primeira linha constitui o cabeçalho do método e o código entre as chaves é o corpo do método. Se você ignorar o corpo por enquanto, a definição do método será assim: </p><p class="demoCode" style="margin-left:10px"><code>&nbsp;&nbsp;&nbsp;<span class="keyword">public void</span> run() {</code><br/><i class="demoText" style="margin-left:3.5em">corpo da definição do método</i><br/><code>&nbsp;&nbsp;&nbsp;}</code><br/></p><p> As duas primeiras palavras no cabeçalho do método, <code class="keyword">public</code> e <code class="keyword">void</code>, fazem parte da estrutura sintática do Java, e você deve se sentir livre para ignorá-las neste momento. A próxima palavra na linha de cabeçalho especifica o nome do novo método, que neste caso é o método <b>executado</b>. Definir um método significa que Karel agora pode responder a um novo comando com esse nome. O comando <code>run</code> desempenha um papel especial em um programa Karel. Quando você inicia um programa Karel, ele cria uma nova instância Karel, adiciona esse Karel a um mundo que você especifica e, em seguida, emite o comando run. O efeito de executar o programa é definido pelo corpo do método de execução, que é uma sequência de comandos que o robô executará em ordem. Por exemplo, o corpo do método de execução do programa BeeperPickingKarel é: </p><p class="demoCode" style="margin-left:10px"><code>&nbsp;&nbsp;&nbsp;mover();</code><br/><code>&nbsp;&nbsp;&nbsp;escolherBeeper();</code><br/><code>&nbsp;&nbsp;&nbsp;mover();</code><br/></p><p> Assim, se o estado inicial do mundo coincide com o exemplo dado no Capítulo 1, Karel primeiro avança para o canto contendo o sinal sonoro, pega o bip e, finalmente, avança para o canto imediatamente antes da parede, como mostrado a seguir. diagrama antes e depois: </p>
<%
  include('templates/'+lang+'/programs/beforeAfter.html', name="ba2", before="stepUp", after="stepUpM1", ratio="0.7", canvasWidth="300")
%>
<h2> Resolvendo um problema mais interessante </h2><p> O programa BeeperPickingKarel definido acima não faz muito ainda. Vamos tentar torná-lo um pouco mais interessante. Suponha que o objetivo não seja simplesmente fazer com que Karel pegue o beeper, mas mova o beeper de sua posição inicial na segunda coluna e primeira linha para o centro de uma saliência. Assim, sua próxima tarefa é definir um novo programa Karel que realize a tarefa ilustrada neste diagrama: </p>
<%
  include('templates/'+lang+'/programs/beforeAfter.html', name="ba3", before="stepUp", after="stepUpGoal", ratio="0.7", canvasWidth="300")
%>
<p> Os três primeiros comandos do novo programa - os que se movem para a frente, pegam o bip e depois sobem até a borda - são os mesmos de antes: </p></p><p class="demoCode" style="margin-left:10px"><code>&nbsp;&nbsp;&nbsp;mover();</code><br/><code>&nbsp;&nbsp;&nbsp;escolherBeeper();</code><br/><code>&nbsp;&nbsp;&nbsp;mover();</code><br/></p><p> A partir daqui, o próximo passo é virar à esquerda para começar a subir a borda. Essa operação é fácil, porque Karel tem um comando vireAEsquerda em seu repertório padrão. A execução de um comando vireAEsquerda no final da sequência de comandos anterior deixa Karel voltado para o norte no canto da primeira linha e terceira coluna. Se Karel executar um comando de movimento, ele se moverá para o norte para alcançar a seguinte posição: </p>
<%
  include('templates/'+lang+'/programs/world.html', name="ba3", world="stepUpM2")
%>
<p> A partir daqui, a próxima coisa que você precisa fazer é fazer com que Karel vire à direita para que fique novamente voltado para o leste. Embora esta operação seja conceitualmente tão fácil quanto fazer com que Karel vire à esquerda, há um pequeno problema: a linguagem de Karel inclui um comando <code>vireAEsquerda</code>, mas nenhum comando <code>vireÀDireita</code>. É como se você tivesse comprado o modelo econômico e descobrisse agora que está faltando algumas características importantes. </p><p> Neste ponto, você tem sua primeira oportunidade de começar a pensar como um programador. Você tem um conjunto de comandos, mas não exatamente o conjunto de que precisa. O que você pode fazer? Você consegue realizar o efeito de um comando vireÀDireita usando apenas os recursos que possui? A resposta, claro, é sim. Você pode conseguir o efeito de virar à direita, virando à esquerda três vezes. Depois de três voltas à esquerda, Karel estará enfrentando na direção desejada. A partir daqui, tudo o que você precisa fazer é programar Karel para se deslocar para o centro da borda, soltar o sinal sonoro e então avançar para a posição final. Aqui está uma implementação completa de um programa <code>PassoAcima</code> que realiza toda a tarefa: </p>

<%
  include('templates/'+lang+'/programs/runnable.html', name="stepUp", world="stepUp", ideSpeed=0.5)
%>
