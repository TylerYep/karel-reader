<h1> Capítulo 4: Decomposição </h1><hr/><p> Como forma de ilustrar mais do poder que vem com a capacidade de definir novos métodos, é útil que Karel faça algo um pouco mais prático do que mover um beeper de um lugar para outro. As estradas em torno de Palo Alto, muitas vezes parecem estar precisando de reparo, e pode ser divertido ver se Karel pode preencher buracos em seu mundo abstrato. Por exemplo, imagine que Karel está de pé na “estrada” mostrada na figura da esquerda, um canto à esquerda de um buraco na estrada. O trabalho de Karel é preencher o buraco com um bip e seguir para a próxima esquina. O diagrama à direita ilustra como o mundo deve cuidar da execução do programa. </p>

<%
  include('templates/'+lang+'/programs/beforeAfter.html', name="ba", before="pothole", after="potholeGoal", ratio="0.82", canvasWidth="300")
%>

<p> Se você estiver limitado aos quatro comandos predefinidos, o método de execução para resolver esse problema seria assim: </p><p style="margin-left:2em"><code><span class="keyword">private void</span> run() {</code><br/><code style="margin-left:2em">mover();</code><br/><code style="margin-left:2em">vireAEsquerda();</code><br/><code style="margin-left:2em">vireAEsquerda();</code><br/><code style="margin-left:2em">vireAEsquerda();</code><br/><code style="margin-left:2em">mover();</code><br/><code style="margin-left:2em">colocarBeeper();</code><br/><code style="margin-left:2em">vireAEsquerda();</code><br/><code style="margin-left:2em">vireAEsquerda();</code><br/><code style="margin-left:2em">mover();</code><br/><code style="margin-left:2em">vireAEsquerda();</code><br/><code style="margin-left:2em">vireAEsquerda();</code><br/><code style="margin-left:2em">vireAEsquerda();</code><br/><code style="margin-left:2em">mover();</code><br/><code>}</code></p><p> A motivação inicial para definir o método vireÀDireita era que era complicado continuar repetindo três comandos vireAEsquerda para realizar uma curva à direita. A definição de novos métodos tem outra finalidade importante além de permitir que você evite repetir as mesmas sequências de comandos sempre que quiser executar uma tarefa específica. O poder de definir métodos desbloqueia a estratégia mais importante na programação - o processo de dividir um grande problema em partes menores que são mais fáceis de resolver. O processo de decompor um programa em partes menores é chamado de decomposição, e as partes componentes de um problema grande são chamadas de subproblemas. </p><p> Como exemplo, o problema de preencher o buraco na estrada pode ser decomposto nos seguintes subproblemas: </p><ol><li> Mova-se para o buraco <li> Encha o buraco, soltando um bip nele <li> Siga para a próxima esquina </li></li></li></ol><p> Se você pensar sobre o problema dessa maneira, poderá usar as definições de método para criar um programa que reflita sua concepção da estrutura do programa. O método de execução ficaria assim: </p><p style="margin-left:2em"><code><span class="keyword">private void</span> run() {</code><br/><code style="margin-left:2em">mover();</code><br/><code style="margin-left:2em">encherOBuraco();</code><br/><code style="margin-left:2em">mover();</code><br/><code>}</code></p><p> A correspondência com o esquema é imediatamente clara, e tudo seria ótimo se você conseguisse que Karel entendesse o que você entende por encherOBuraco. Dado o poder de definir métodos, implementar o encherOBuraco é extremamente simples. Tudo o que você precisa fazer é definir um método encherOBuraco cujo corpo consista nos comandos que você já escreveu para fazer o trabalho, assim: </p><p style="margin-left:2em"><code><span class="keyword">private void</span> encherOBuraco() {</code><br/><code style="margin-left:2em">vireÀDireita();</code><br/><code style="margin-left:2em">mover();</code><br/><code style="margin-left:2em">colocarBeeper();</code><br/><code style="margin-left:2em">inversãoDeMarcha();</code><br/><code style="margin-left:2em">mover();</code><br/><code style="margin-left:2em">vireÀDireita();</code><br/><code>}</code></p><p> Aqui está o programa completo. Observe como você pode entender a intenção dos programadores simplesmente lendo o método de execução. Quando você executa o programa, o destaque da linha mostra como um computador irá executá-lo, passo a passo. No entanto, porque o programa está bem quebrado, podemos entendê-lo em um nível de pensamento humano: </p>

<%
  include('templates/'+lang+'/programs/runnable.html', name="pothole", world="pothole", canvasWidth=200)
%>
