<h1> Capítulo 2: Programación Karel </h1><hr/><p> El estilo más simple de programa de Karel utiliza texto para especificar una secuencia de comandos internos que deben ser ejecutadas cuando se <b>ejecuta</b> el programa. Considere el sencillo programa de Karel a continuación. El texto a la izquierda es el programa. El estado del mundo de Karel se muestra a la derecha: </p>

<%
  include('templates/'+lang+'/programs/runnable.html', name="beeperPicking", world="stepUp")
%>

<p> Presiona el botón &quot;Ejecutar&quot; para ejecutar el programa. Por lo general, los programas se escriben en una aplicación especial llamada <b>Entorno de desarrollo integrado</b>(IDE) y la mayoría de los programas de Karel se escriben en un IDE llamado Eclipse. Al igual que un IDE, este lector tiene la capacidad de ejecutar programas para ayudarte a <i>ver</i> cómo funcionan las cosas a medida que aprendes. </p><p> El programa se compone de varias partes. La primera parte consta de las siguientes líneas: </p><p><p class="demoCode" style="margin-left:10px"><pre class="comment" translate="no">/*
&nbsp;*&nbsp;Archivo: BeeperRecogiendoKarel.java
&nbsp;* -----------------------------------
&nbsp;*&nbsp;El programa BeeperRecogiendoKarel define un
&nbsp;* método de "ejecución" con tres comandos. Estos
&nbsp;* comandos hacen que Karel avance un bloque,
&nbsp;* levante un beeper y luego avance hasta la
&nbsp;* siguiente esquina.
&nbsp;*/</pre></p><p> Estas líneas son un ejemplo de un <b>comentario</b>, que es simplemente un texto diseñado para explicar el funcionamiento del programa a los lectores humanos. Los comentarios tanto en Karel como en Java comienzan con los caracteres <code class="comment">/*</code> y terminan con los caracteres <code class="comment">*/</code>. Aquí, el comentario comienza en la primera línea y termina varias líneas más tarde. Las estrellas en las líneas individuales que componen el texto del comentario no son necesarias, pero facilitan que los lectores humanos vean la extensión del comentario. En un programa simple, los comentarios extensos pueden parecer tontos porque el efecto del programa es obvio, pero son extremadamente importantes como medio para documentar el diseño de programas más grandes y complejos. La segunda parte del programa es la línea: </p><p class="demoCode" style="margin-left:10px"><code><span class="keyword">import</span> stanford.karel.*;</code></p><p> Esta línea solicita la inclusión de todas las definiciones de la biblioteca <code>stanford.karel</code>. Esta biblioteca contiene las definiciones básicas necesarias para escribir programas de Karel, como las definiciones de las operaciones estándar <code>moverse()</code> y <code>recogerBeeper()</code>. Debido a que siempre necesita acceder a estas operaciones, cada programa Karel que escriba incluirá este comando de importación antes de escribir el programa real. </p><p> La parte final del programa Karel consiste en la siguiente definición del programa: </p><p class="demoCode" style="margin-left:10px"><code><span class="keyword">public class</span> BeeperRecogiendoKarel <span class="keyword">extends</span> Karel {</code><br/><code>&nbsp;&nbsp;&nbsp;<span class="keyword">public void</span> run() {</code><br/><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;moverse();</code><br/><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;recogerBeeper();</code><br/><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;moverse();</code><br/><code>&nbsp;&nbsp;&nbsp;}</code><br/><code>}</code><br/></p><p> Para entender esta definición, es útil mirar más detenidamente su estructura. La definición del programa BeeperRecogiendoKarel consiste en la línea que comienza con <code class="keyword">public class</code> y abarca todo entre la llave al final de esa línea y la llave de cierre correspondiente en la última línea del programa. La línea única que introduce la nueva clase se llama el <b>encabezado</b> de la definición; El código entre las llaves se llama el <b>cuerpo</b>. </p><p> En programación, a menudo es muy útil pensar en una definición particular y su cuerpo como ideas separables. En este ejemplo, la definición de BeeperRecogiendoKarel tiene la siguiente forma, donde todo el cuerpo de la definición se puede quitar de tu mente por el momento: </p><p class="demoCode" style="margin-left:10px"><code><span class="keyword">public class</span> BeeperRecogiendoKarel <span class="keyword">extends</span> Karel {</code><br/><i class="demoText" style="margin-left:2em">cuerpo de la definición del programa</i><br/><code>}</code><br/></p><p> La línea de encabezado en la parte superior le dice bastante sobre el programa BeeperRecogiendoKarel, incluso antes de que haya visto para ver qué contiene el cuerpo. La frase <code class="keyword">public class</code> comienza la definición de un programa. La frase <code><span class="keyword">extends</span> Karel</code> se usa para indicar que <code>BeeperRecogiendoKarel</code> es un programa de Karel. </p><p> Ahora veamos el cuerpo del programa BeeperRecogiendoKarel. Ese cuerpo consta de las siguientes líneas: </p><p class="demoCode" style="margin-left:10px"><code>&nbsp;&nbsp;&nbsp;<span class="keyword">public void</span> run() {</code><br/><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;moverse();</code><br/><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;recogerBeeper();</code><br/><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;moverse();</code><br/><code>&nbsp;&nbsp;&nbsp;}</code><br/></p><p> Estas líneas representan la definición de un nuevo <b>método</b>, que especifica la secuencia de pasos necesarios para responder a un comando. Como en el caso del programa BeeperRecogiendoKarel, la definición del método consta de dos partes que pueden considerarse por separado: la primera línea constituye el encabezado del método y el código entre las llaves es el cuerpo del método. Si ignora el cuerpo por ahora, la definición del método se ve así: </p><p class="demoCode" style="margin-left:10px"><code>&nbsp;&nbsp;&nbsp;<span class="keyword">public void</span> run() {</code><br/><i class="demoText" style="margin-left:3.5em">cuerpo de la definición del método</i><br/><code>&nbsp;&nbsp;&nbsp;}</code><br/></p><p> Las dos primeras palabras en el encabezado del método, <code class="keyword">public</code> y <code class="keyword">void</code>, son parte de la estructura sintáctica de Java, y debería sentirse libre de ignorarlas en este momento. La siguiente palabra en la línea del encabezado especifica el nombre del nuevo método, que en este caso es el método <b>ejecutado</b>. Definir un método significa que Karel ahora puede responder a un nuevo comando con ese nombre. El comando de <code>run</code> juega un papel especial en un programa de Karel. Cuando inicia un programa de Karel, crea una nueva instancia de Karel, agrega ese Karel a un mundo que usted especifique y luego ejecuta el comando de ejecución. El efecto de ejecutar el programa está definido por el cuerpo del método de ejecución, que es una secuencia de comandos que el robot ejecutará en orden. Por ejemplo, el cuerpo del método de ejecución para el programa BeeperRecogiendoKarel es: </p><p class="demoCode" style="margin-left:10px"><code>&nbsp;&nbsp;&nbsp;moverse();</code><br/><code>&nbsp;&nbsp;&nbsp;recogerBeeper();</code><br/><code>&nbsp;&nbsp;&nbsp;moverse();</code><br/></p><p> Por lo tanto, si el estado inicial del mundo coincide con el ejemplo dado en el Capítulo 1, Karel primero avanza a la esquina que contiene el beeper, toma ese beeper y finalmente avanza a la esquina justo antes de la pared, como se muestra a continuación Diagrama de antes y después: </p>
<%
  include('templates/'+lang+'/programs/beforeAfter.html', name="ba2", before="stepUp", after="stepUpM1", ratio="0.7", canvasWidth="300")
%>
<h2> Resolviendo un problema más interesante. </h2><p> El programa BeeperRecogiendoKarel definido anteriormente todavía no hace mucho. Tratemos de hacerlo un poco más interesante. Supongamos que el objetivo no es simplemente lograr que Karel tome el beeper, sino que mueva el beeper desde su posición inicial en la 2ª columna y la 1ª fila hasta el centro de una repisa. Por lo tanto, su próxima tarea es definir un nuevo programa Karel que realice la tarea ilustrada en este diagrama: </p>
<%
  include('templates/'+lang+'/programs/beforeAfter.html', name="ba3", before="stepUp", after="stepUpGoal", ratio="0.7", canvasWidth="300")
%>
<p> Los primeros tres comandos en el nuevo programa, los que se mueven hacia adelante, captan la señal acústica y luego se mueven hacia arriba hasta el borde, son los mismos que antes: </p></p><p class="demoCode" style="margin-left:10px"><code>&nbsp;&nbsp;&nbsp;moverse();</code><br/><code>&nbsp;&nbsp;&nbsp;recogerBeeper();</code><br/><code>&nbsp;&nbsp;&nbsp;moverse();</code><br/></p><p> Desde aquí, el siguiente paso es girar a la izquierda para comenzar a subir la cornisa. Esa operación es fácil, porque Karel tiene un comando girarALaIzquierda en su repertorio estándar. La ejecución de un comando girarALaIzquierda al final de la secuencia de comandos anterior deja a Karel mirando hacia el norte en la esquina de la 1ª fila y la 3ª columna. Si Karel ejecuta un comando de movimiento, se moverá hacia el norte para alcanzar la siguiente posición: </p>
<%
  include('templates/'+lang+'/programs/world.html', name="ba3", world="stepUpM2")
%>
<p> A partir de aquí, lo siguiente que debe hacer es lograr que Karel gire a la derecha para que vuelva a mirar al este. Si bien esta operación es conceptualmente tan fácil como hacer que Karel gire a la izquierda, hay un pequeño problema: el lenguaje de Karel incluye un comando <code>girarALaIzquierda</code>, pero no <code>girarALaDerecha</code> comando <code>girarALaDerecha</code>. Es como si comprara el modelo económico y ahora descubrió que le faltan algunas características importantes. </p><p> En este punto, tiene su primera oportunidad de comenzar a pensar como un programador. Tiene un conjunto de comandos, pero no exactamente el conjunto que necesita. ¿Qué puedes hacer? ¿Puedes lograr el efecto de un comando girarALaDerecha usando solo las capacidades que tienes? La respuesta, por supuesto, es sí. Puede lograr el efecto de girar a la derecha girando a la izquierda tres veces. Después de tres giros a la izquierda, Karel estará orientado en la dirección deseada. Desde aquí, todo lo que necesita hacer es programar a Karel para que se desplace hacia el centro de la repisa, deje caer el zumbador y luego avance hacia la posición final. Aquí hay una implementación completa de un programa <code>Aumentar</code> que realiza toda la tarea: </p>

<%
  include('templates/'+lang+'/programs/runnable.html', name="stepUp", world="stepUp", ideSpeed=0.5)
%>
